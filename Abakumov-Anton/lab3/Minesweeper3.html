<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <title>–ú—ñ–Ω–µ—Ä ‚Äì –≤—ñ–∑—É–∞–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main class="hralnyi-ekran">
        <div class="zagolovok-hry">
            –ú—ñ–Ω–µ—Ä
        </div>

        <header class="heder-hry">
            <div class="indykator" aria-label="–ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ø—Ä–∞–ø–æ—Ä—Ü—ñ–≤">
                <div class="indykator-znachok">üö©</div>
                <div>
                    <div class="indykator-tekst">–ü—Ä–∞–ø–æ—Ä—Ü—ñ</div>
                    <div class="indykator-lychylka indykator-lychylka--prapory">010</div>
                </div>
            </div>

            <button class="knopka-nova-hra" type="button">
                <span class="knopka-nova-hra-emoji">üôÇ</span>
                <span>–ù–æ–≤–∞ –≥—Ä–∞</span>
            </button>

            <div class="indykator" aria-label="–¢–∞–π–º–µ—Ä –≥—Ä–∏">
                <div class="indykator-znachok">‚è±Ô∏è</div>
                <div>
                    <div class="indykator-tekst">–ß–∞—Å</div>
                    <div class="indykator-lychylka">023</div>
                </div>
            </div>
        </header>

        <section class="pole-hry-wrapper">
            <div class="pole-hry" aria-label="–ü–æ–ª–µ –≥—Ä–∏ –ú—ñ–Ω–µ—Ä">
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>

                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--1">1</span></div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--2">2</span></div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--3">3</span></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--4">4</span></div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--5">5</span></div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--6">6</span></div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--8">8</span></div>
                <div class="klityna klityna--zakryta"></div>

                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--prapor-mina">üö©</div>
                <div class="klityna klityna--vidkryta"></div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--1">1</span></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--vidkryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>

                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--prapor-pomylka">üö©</div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--1">1</span></div>
                <div class="klityna klityna--vidkryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--2">2</span></div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--3">3</span></div>
                <div class="klityna klityna--zakryta"></div>

                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--mina">üí£</div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--2">2</span></div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--1">1</span></div>
                <div class="klityna klityna--mina">üí£</div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--mina">üí£</div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>

                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--mina-aktivna">üí£</div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--3">3</span></div>
                <div class="klityna klityna--vidkryta"></div>
                <div class="klityna klityna--mina">üí£</div>
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--1">1</span></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--vidkryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>

                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>

                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>

                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>

                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
                <div class="klityna klityna--zakryta"></div>
            </div>
        </section>

        <section class="panel-staniv">
            <div class="element-stanu">
                <div class="klityna klityna--zakryta"></div>
                <div class="element-stanu-tekst">
                    <div class="element-stanu-nazva">–ó–∞–∫—Ä–∏—Ç–∞ –∫–ª—ñ—Ç–∏–Ω–∫–∞</div>
                    <div>–ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω, –ø–æ –Ω—ñ–π —â–µ –Ω–µ –∫–ª—ñ–∫–∞–ª–∏.</div>
                </div>
            </div>

            <div class="element-stanu">
                <div class="klityna klityna--vidkryta"><span class="chyslo chyslo--1">1</span></div>
                <div class="element-stanu-tekst">
                    <div class="element-stanu-nazva">–í—ñ–¥–∫—Ä–∏—Ç–∞ –∫–ª—ñ—Ç–∏–Ω–∫–∞</div>
                    <div>–ü–æ–∫–∞–∑—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º—ñ–Ω —É —Å—É—Å—ñ–¥–Ω—ñ—Ö –∫–ª—ñ—Ç–∏–Ω–∫–∞—Ö.</div>
                </div>
            </div>

            <div class="element-stanu">
                <div class="klityna klityna--vidkryta"></div>
                <div class="element-stanu-tekst">
                    <div class="element-stanu-nazva">–ü–æ—Ä–æ–∂–Ω—è –≤—ñ–¥–∫—Ä–∏—Ç–∞</div>
                    <div>–ü–æ—Ä—É—á –Ω–µ–º–∞—î –∂–æ–¥–Ω–æ—ó –º—ñ–Ω–∏.</div>
                </div>
            </div>

            <div class="element-stanu">
                <div class="klityna klityna--prapor-mina">üö©</div>
                <div class="element-stanu-tekst">
                    <div class="element-stanu-nazva">–ü—Ä–∞–ø–æ—Ä–µ—Ü—å –Ω–∞ –º—ñ–Ω—ñ</div>
                    <div>–ü—Ä–∞–≤–∏–ª—å–Ω–∞ –ø–æ–∑–Ω–∞—á–∫–∞ –º—ñ–Ω–∏ –ø—Ä–∞–ø–æ—Ä—Ü–µ–º.</div>
                </div>
            </div>

            <div class="element-stanu">
                <div class="klityna klityna--prapor-pomylka">üö©</div>
                <div class="element-stanu-tekst">
                    <div class="element-stanu-nazva">–ü—Ä–∞–ø–æ—Ä–µ—Ü—å –±–µ–∑ –º—ñ–Ω–∏</div>
                    <div>–ü–æ–º–∏–ª–∫–æ–≤–∏–π –ø—Ä–∞–ø–æ—Ä–µ—Ü—å, –ø—ñ–¥ –Ω–∏–º –Ω–µ–º–∞—î –º—ñ–Ω–∏.</div>
                </div>
            </div>

            <div class="element-stanu">
                <div class="klityna klityna--mina">üí£</div>
                <div class="element-stanu-tekst">
                    <div class="element-stanu-nazva">–ú—ñ–Ω–∞</div>
                    <div>–í—ñ–¥–∫—Ä–∏—Ç–∞ –º—ñ–Ω–∞, –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–æ—Ä–∞–∑–∫–∏.</div>
                </div>
            </div>

            <div class="element-stanu">
                <div class="klityna klityna--mina-aktivna">üí£</div>
                <div class="element-stanu-tekst">
                    <div class="element-stanu-nazva">–ú—ñ–Ω–∞, –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞ –≥—Ä–∞–≤—Ü–µ–º</div>
                    <div>–ö–ª—ñ—Ç–∏–Ω–∫–∞, —á–µ—Ä–µ–∑ —è–∫—É —Å—Ç–∞–ª–∞—Å—è –ø–æ—Ä–∞–∑–∫–∞.</div>
                </div>
            </div>
        </section>
    </main>
    <script>

    function stvorytyKlitynku() {
        return {
            yeMina: false,
            kilkistSusidnihMin: 0,
            isOpened: false,
            isFlagged: false
        };
    }

    let poleHry = [];

    const stanHry = {
        shyryna: 0,
        vysota: 0,
        kilkistMin: 0,
        status: 'ne_pochata', 
        vidkrytiBezpechni: 0,         
        zahalnaKilkistBezpechnih: 0   
    };

    let timerId = null;
    let secondsPassed = 0;

    function startTimer() {
        if (timerId !== null) {
            return;
        }
        secondsPassed = 0;
        timerId = setInterval(() => {
            secondsPassed++;
            console.log('–¢–∞–π–º–µ—Ä:', secondsPassed, '—Å–µ–∫—É–Ω–¥(–∏) –≤—ñ–¥ –ø–æ—á–∞—Ç–∫—É –≥—Ä–∏');
        }, 1000);
    }

    function stopTimer() {
        if (timerId === null) return;
        clearInterval(timerId);
        console.log('–¢–∞–π–º–µ—Ä –∑—É–ø–∏–Ω–µ–Ω–æ –Ω–∞', secondsPassed, '—Å–µ–∫—É–Ω–¥–∞—Ö');
        timerId = null;
    }

    function countNeighbourMines(field, row, col) {
        const ryadky = field.length;
        const stovptsi = field[0].length;
        let kilkist = 0;

        for (let dy = -1; dy <= 1; dy++) {
            for (let dx = -1; dx <= 1; dx++) {
                if (dy === 0 && dx === 0) continue; 

                const ny = row + dy;
                const nx = col + dx;

                const vMezhahPolya =
                    ny >= 0 && ny < ryadky &&
                    nx >= 0 && nx < stovptsi;

                if (vMezhahPolya && field[ny][nx].yeMina) {
                    kilkist++;
                }
            }
        }

        return kilkist;
    }

    function generateField(rows, cols, mines) {
        const field = [];

        for (let y = 0; y < rows; y++) {
            const ryadok = [];
            for (let x = 0; x < cols; x++) {
                ryadok.push(stvorytyKlitynku());
            }
            field.push(ryadok);
        }

        let rozmishchenoMin = 0;
        while (rozmishchenoMin < mines) {
            const randRow = Math.floor(Math.random() * rows);
            const randCol = Math.floor(Math.random() * cols);

            if (!field[randRow][randCol].yeMina) {
                field[randRow][randCol].yeMina = true;
                rozmishchenoMin++;
            }
        }

        for (let y = 0; y < rows; y++) {
            for (let x = 0; x < cols; x++) {
                field[y][x].kilkistSusidnihMin = countNeighbourMines(field, y, x);
            }
        }

        return field;
    }

    function vMezhahPolya(row, col) {
        return (
            row >= 0 && row < stanHry.vysota &&
            col >= 0 && col < stanHry.shyryna
        );
    }

    function perevirytyPeremohu() {
        if (stanHry.vidkrytiBezpechni === stanHry.zahalnaKilkistBezpechnih) {
            stanHry.status = 'peremoga';
            console.log('–í—ñ—Ç–∞—î–º–æ! –ü–µ—Ä–µ–º–æ–≥–∞!');
            stopTimer();
        }
    }

    function openCell(row, col) {
        if (stanHry.status !== 'u_protsesi') {
            console.log('–ì—Ä–∞ –≤–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, openCell –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è. –°—Ç–∞–Ω:', stanHry.status);
            return;
        }

        if (!vMezhahPolya(row, col)) return;

        const klitynka = poleHry[row][col];

        if (klitynka.isOpened || klitynka.isFlagged) return;

        if (timerId === null) {
            startTimer();
        }

        klitynka.isOpened = true;

        if (klitynka.yeMina) {
            stanHry.status = 'porazka';
            console.log('–ù–∞—Ç–∏—Å–Ω—É–ª–∏ –Ω–∞ –º—ñ–Ω—É! –ü–û–†–ê–ó–ö–ê.');
            stopTimer();
            console.log('–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –≥—Ä–∏:', stanHry);
            return;
        }

        stanHry.vidkrytiBezpechni++;

        if (klitynka.kilkistSusidnihMin === 0) {
            for (let dy = -1; dy <= 1; dy++) {
                for (let dx = -1; dx <= 1; dx++) {
                    if (dy === 0 && dx === 0) continue;
                    const ny = row + dy;
                    const nx = col + dx;
                    if (vMezhahPolya(ny, nx)) {
                        openCell(ny, nx);
                    }
                }
            }
        }

        perevirytyPeremohu();

        console.log(`–ü—ñ—Å–ª—è openCell(${row}, ${col})`);
        console.log('–ü–æ–ª–µ –≥—Ä–∏:', poleHry);
        console.log('–°—Ç–∞–Ω –≥—Ä–∏:', stanHry);
    }

    function toggleFlag(row, col) {
        if (stanHry.status !== 'u_protsesi') {
            console.log('–ì—Ä–∞ –≤–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –ø—Ä–∞–ø–æ—Ä—Ü—ñ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å—Å—è.');
            return;
        }

        if (!vMezhahPolya(row, col)) return;

        const klitynka = poleHry[row][col];

        if (klitynka.isOpened) return;

        klitynka.isFlagged = !klitynka.isFlagged;

        console.log(`toggleFlag(${row}, ${col}): isFlagged =`, klitynka.isFlagged);
        console.log('–ü–æ–ª–µ –≥—Ä–∏:', poleHry);
    }

    function pochatyNovuHru(rows = 10, cols = 10, mines = 10) {
        stopTimer(); 

        stanHry.vysota = rows;
        stanHry.shyryna = cols;
        stanHry.kilkistMin = mines;
        stanHry.status = 'u_protsesi';
        stanHry.vidkrytiBezpechni = 0;
        stanHry.zahalnaKilkistBezpechnih = rows * cols - mines;

        poleHry = generateField(rows, cols, mines);

        console.log('–ù–æ–≤–∞ –≥—Ä–∞. –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–µ –ø–æ–ª–µ:', poleHry);
        console.log('–ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω –≥—Ä–∏:', stanHry);
    }

    pochatyNovuHru(10, 10, 10);

    console.log('–ú—ñ–Ω –Ω–∞–≤–∫–æ–ª–æ –∫–ª—ñ—Ç–∏–Ω–∫–∏ (0,0):', countNeighbourMines(poleHry, 0, 0));
    console.log('–ú—ñ–Ω –Ω–∞–≤–∫–æ–ª–æ –∫–ª—ñ—Ç–∏–Ω–∫–∏ (1,1):', countNeighbourMines(poleHry, 1, 1));

    console.log(
        '–î–ª—è —Ä—É—á–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:\n',
        '- –≤–∏–∫–ª–∏–∫–∞–π—Ç–µ openCell(row, col)\n',
        '- –≤–∏–∫–ª–∏–∫–∞–π—Ç–µ toggleFlag(row, col)\n',
        '- –≤–∏–∫–ª–∏–∫–∞–π—Ç–µ startTimer() —Ç–∞ stopTimer() –æ–∫—Ä–µ–º–æ –ø—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ.'
    );
</script>
</body>
</html>
</body>
</html>
